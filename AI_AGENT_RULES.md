# –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è AI –ê–≥–µ–Ω—Ç–∞ - CRM External Service Backend

> –ö–æ—Ä–æ—Ç–∫–∏–π —Å–ø–∏—Å–æ–∫ –ø—Ä–∞–≤–∏–ª, —è–∫—ñ –û–ë–û–í'–Ø–ó–ö–û–í–û –¥–æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏—Å—è –ø—Ä–∏ —Ä–æ–±–æ—Ç—ñ –∑ –±–µ–∫–µ–Ω–¥–æ–º

## üéØ –ì–æ–ª–æ–≤–Ω–µ –ø—Ä–∞–≤–∏–ª–æ

**–¶–µ–π –±–µ–∫–µ–Ω–¥ —Å–µ—Ä–≤—ñ—Å –º–æ–∂–µ –±—É—Ç–∏ –∫–ª–æ–Ω–æ–≤–∞–Ω–∏–π —ñ –∞–¥–∞–ø—Ç–æ–≤–∞–Ω–∏–π –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –ø—Ä–æ—î–∫—Ç—ñ–≤ –∑ –Ω–æ–≤–∏–º —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª–æ–º. –ê–õ–ï –º–µ—Ö–∞–Ω—ñ–∑–º SSO –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó, –≤–∞–ª—ñ–¥–∞—Ü—ñ—è JWT —Ç–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –æ—Å–Ω–æ–≤–Ω–∏–º —Å–µ—Ä–≤–µ—Ä–æ–º –º–∞—î –∑–∞–ª–∏—à–∞—Ç–∏—Å—è –Ω–µ–∑–º—ñ–Ω–Ω–æ—é.**

### –©–æ –º–æ–∂–Ω–∞ –∑–º—ñ–Ω—é–≤–∞—Ç–∏:
- ‚úÖ –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ –≤ –º–æ–¥—É–ª—è—Ö (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `modules/contentzavod/`)
- ‚úÖ –ú–æ–∂–Ω–∞ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ –º–æ–¥—É–ª—ñ
- ‚úÖ –ú–æ–∂–Ω–∞ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏
- ‚úÖ –ú–æ–∂–Ω–∞ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –Ω–æ–≤—ñ —Å–µ—Ä–≤—ñ—Å–∏ –¥–ª—è –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∏
- ‚úÖ DTO —Ç–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è
- ‚úÖ n8n webhook –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏ (—á–µ—Ä–µ–∑ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è)

### –©–æ –º–∞—î –∑–∞–ª–∏—à–∞—Ç–∏—Å—è:
- ‚ùå **SSO –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è** (`src/auth/`, `src/controllers/auth.controller.ts`)
- ‚ùå **JWT –í–∞–ª—ñ–¥–∞—Ü—ñ—è** (`src/auth/jwt.strategy.ts`, `src/auth/auth.guard.ts`)
- ‚ùå **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –æ—Å–Ω–æ–≤–Ω–∏–º —Å–µ—Ä–≤–µ—Ä–æ–º** (`src/services/main-server-client.service.ts`)
- ‚ùå **Public Key Service** (`src/services/public-key.service.ts`, `src/config/jwt.config.ts`)
- ‚ùå **Core Auth Endpoints** (`/auth/sso/initiate`, `/auth/sso/exchange`, `/auth/check`)

## ‚úÖ –©–û –ú–û–ñ–ù–ê –ú–û–î–ò–§–Ü–ö–£–í–ê–¢–ò

### ‚úÖ –ú–æ–¥—É–ª—å `contentzavod`:
- –í—Å—ñ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ –≤ `src/modules/contentzavod/controllers/`
- –í—Å—ñ —Å–µ—Ä–≤—ñ—Å–∏ –≤ `src/modules/contentzavod/services/`
- –í—Å—ñ DTO –≤ `src/modules/contentzavod/dto/`
- –í—Å—ñ —É—Ç–∏–ª—ñ—Ç–∏ –≤ `src/modules/contentzavod/utils/`
- –ú–æ–∂–Ω–∞ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏, —Å–µ—Ä–≤—ñ—Å–∏, DTO
- –ú–æ–∂–Ω–∞ –º—ñ–Ω—è—Ç–∏ –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫—É

### ‚úÖ –ù–æ–≤—ñ –º–æ–¥—É–ª—ñ:
- –°—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –Ω–æ–≤—ñ –º–æ–¥—É–ª—ñ –≤ `src/modules/`
- –î–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏, —Å–µ—Ä–≤—ñ—Å–∏, DTO
- –Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ –∑ n8n webhooks
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `UserContextService` –¥–ª—è user login
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `N8NWebhookService` –¥–ª—è n8n –≤–∏–∫–ª–∏–∫—ñ–≤

### ‚úÖ –ó–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è:
- –í—Å—ñ `N8N_*_WEBHOOK` –∑–º—ñ–Ω–Ω—ñ –º–æ–∂–Ω–∞ –∑–º—ñ–Ω—é–≤–∞—Ç–∏
- `N8N_WEBHOOK_BASE_URL` –º–æ–∂–Ω–∞ –∑–º—ñ–Ω—é–≤–∞—Ç–∏
- `N8N_WEBHOOK_SECRET` –º–æ–∂–Ω–∞ –∑–º—ñ–Ω—é–≤–∞—Ç–∏

## üö´ –©–û –ù–ï –ú–û–ñ–ù–ê –ú–û–î–ò–§–Ü–ö–£–í–ê–¢–ò

### ‚ùå –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó (–û–ë–û–í'–Ø–ó–ö–û–í–û –ó–ë–ï–†–ï–ì–¢–ò):

1. **`src/auth/auth.service.ts`** - –õ–æ–≥—ñ–∫–∞ SSO –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
   - `initiateLogin()` - –Ü–Ω—ñ—Ü—ñ–∞—Ü—ñ—è SSO
   - `handleCallback()` - –û–±–º—ñ–Ω SSO –∫–æ–¥—É
   - `checkAuth()` - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

2. **`src/auth/jwt.strategy.ts`** - –°—Ç—Ä–∞—Ç–µ–≥—ñ—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó JWT
   - –õ–æ–≥—ñ–∫–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó —Ç–æ–∫–µ–Ω—É
   - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–∏–ø—É service —Ç–æ–∫–µ–Ω—É
   - –í–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–∞–∑–≤–∏ —Å–µ—Ä–≤—ñ—Å—É

3. **`src/auth/auth.guard.ts`** - Guard –∑–∞—Ö–∏—Å—Ç—É –º–∞—Ä—à—Ä—É—Ç—ñ–≤
   - –í–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è JWT —Ç–æ–∫–µ–Ω—É
   - –í–∞–ª—ñ–¥–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

4. **`src/controllers/auth.controller.ts`** - Auth –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏
   - `/auth/sso/initiate` - –ï–Ω–¥–ø–æ—ñ–Ω—Ç —ñ–Ω—ñ—Ü—ñ–∞—Ü—ñ—ó SSO
   - `/auth/sso/exchange` - –ï–Ω–¥–ø–æ—ñ–Ω—Ç –æ–±–º—ñ–Ω—É –∫–æ–¥—É
   - `/auth/check` - –ï–Ω–¥–ø–æ—ñ–Ω—Ç –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

5. **`src/services/public-key.service.ts`** - –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—É–±–ª—ñ—á–Ω–æ–≥–æ –∫–ª—é—á–∞
   - –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—É–±–ª—ñ—á–Ω–æ–≥–æ –∫–ª—é—á–∞ –∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
   - –õ–æ–≥—ñ–∫–∞ –∫–µ—à—É–≤–∞–Ω–Ω—è

6. **`src/config/jwt.config.ts`** - –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è JWT
   - –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—É–±–ª—ñ—á–Ω–æ–≥–æ –∫–ª—é—á–∞
   - –ù–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–ª—é—á–∞

### ‚ùå –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –æ—Å–Ω–æ–≤–Ω–∏–º —Å–µ—Ä–≤–µ—Ä–æ–º (–û–ë–û–í'–Ø–ó–ö–û–í–û –ó–ë–ï–†–ï–ì–¢–ò):

1. **`src/services/main-server-client.service.ts`** - –ö–ª—ñ—î–Ω—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
   - –í—Å—ñ –º–µ—Ç–æ–¥–∏ –¥–ª—è —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è –∑ –æ—Å–Ω–æ–≤–Ω–∏–º —Å–µ—Ä–≤–µ—Ä–æ–º
   - –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ç–æ–∫–µ–Ω–∞–º–∏
   - –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

2. **`src/services/balance-api.service.ts`** - –ö–ª—ñ—î–Ω—Ç Balance API
   - –û–ø–µ—Ä–∞—Ü—ñ—ó –∑ –±–∞–ª–∞–Ω—Å–æ–º
   - –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—è–º–∏

3. **`src/services/analytics.service.ts`** - –ö–ª—ñ—î–Ω—Ç Analytics API
   - –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –ø–æ–¥—ñ–π
   - –ü–∞–∫–µ—Ç–Ω—ñ –ø–æ–¥—ñ—ó

### ‚ùå Core Infrastructure (–û–ë–û–í'–Ø–ó–ö–û–í–û –ó–ë–ï–†–ï–ì–¢–ò):

1. **`src/main.ts`** - Bootstrap –¥–æ–¥–∞—Ç–∫—É
   - –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è CORS
   - Validation pipes
   - Exception filters
   - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Swagger

2. **`src/app.module.ts`** - Root –º–æ–¥—É–ª—å
   - –Ü–º–ø–æ—Ä—Ç–∏ –º–æ–¥—É–ª—ñ–≤
   - Auth –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∏
   - Core —Å–µ—Ä–≤—ñ—Å–∏

3. **`src/filters/http-exception.filter.ts`** - –ì–ª–æ–±–∞–ª—å–Ω–∏–π exception filter

## ‚úÖ –î–û–ó–í–û–õ–ï–ù–û

### ‚úÖ –°—Ç–≤–æ—Ä—é–≤–∞—Ç–∏:
- –ù–æ–≤—ñ –º–æ–¥—É–ª—ñ –≤ `src/modules/`
- –ù–æ–≤—ñ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ –≤ –º–æ–¥—É–ª—è—Ö
- –ù–æ–≤—ñ —Å–µ—Ä–≤—ñ—Å–∏ –¥–ª—è –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∏
- –ù–æ–≤—ñ DTO –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
- –ù–æ–≤—ñ n8n webhook –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏ (—á–µ—Ä–µ–∑ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è)

### ‚úÖ –ú–æ–¥–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏:
- –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫—É –≤ —ñ—Å–Ω—É—é—á–∏—Ö –º–æ–¥—É–ª—è—Ö
- n8n webhook –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏ (–∑–º—ñ–Ω—é–≤–∞—Ç–∏ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è)
- –§–æ—Ä–º–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π (–∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É `{ status, data, message }`)
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏ (–∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –∞–Ω–≥–ª—ñ–π—Å—å–∫—É –º–æ–≤—É)

### ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:
- `JwtAuthGuard` –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É –º–∞—Ä—à—Ä—É—Ç—ñ–≤
- `RequestWithToken` interface –¥–ª—è –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–æ–≤–∞–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
- `UserContextService` –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è user login
- `N8NWebhookService` –¥–ª—è –≤–∏–∫–ª–∏–∫—ñ–≤ n8n webhooks
- `MainServerClientService` –¥–ª—è —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è –∑ –æ—Å–Ω–æ–≤–Ω–∏–º —Å–µ—Ä–≤–µ—Ä–æ–º

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤—ñ –ø—Ä–∞–≤–∏–ª–∞

1. **–ó–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `JwtAuthGuard`** –¥–ª—è –∑–∞—Ö–∏—â–µ–Ω–∏—Ö –º–∞—Ä—à—Ä—É—Ç—ñ–≤
2. **–ó–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `@ApiBearerAuth()`** –¥–ª—è Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó
3. **–ó–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `RequestWithToken`** interface –¥–ª—è `@Req()` –≤ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞—Ö
4. **–ó–∞–≤–∂–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞–π—Ç–µ `{ status, data, message }`** —Ñ–æ—Ä–º–∞—Ç
5. **–ó–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `UserContextService`** –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è `userLogin` –¥–ª—è n8n –≤–∏–∫–ª–∏–∫—ñ–≤
6. **–ó–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `N8NWebhookService`** –¥–ª—è –≤–∏–∫–ª–∏–∫—ñ–≤ n8n webhooks (–Ω–µ –ø—Ä—è–º—ñ HTTP –≤–∏–∫–ª–∏–∫–∏)
7. **–ó–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `MainServerClientService`** –¥–ª—è —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è –∑ –æ—Å–Ω–æ–≤–Ω–∏–º —Å–µ—Ä–≤–µ—Ä–æ–º
8. **–ù—ñ–∫–æ–ª–∏ –Ω–µ –º–æ–¥–∏—Ñ—ñ–∫—É–π—Ç–µ –ª–æ–≥—ñ–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó** –≤ `src/auth/`
9. **–ù—ñ–∫–æ–ª–∏ –Ω–µ –º–æ–¥–∏—Ñ—ñ–∫—É–π—Ç–µ JWT –≤–∞–ª—ñ–¥–∞—Ü—ñ—é** –≤ `src/auth/jwt.strategy.ts`
10. **–ù—ñ–∫–æ–ª–∏ –Ω–µ –º–æ–¥–∏—Ñ—ñ–∫—É–π—Ç–µ –∫–ª—ñ—î–Ω—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞** –≤ `src/services/main-server-client.service.ts`

## üîå n8n –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è

### –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
n8n webhook –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏ –Ω–∞–ª–∞—à—Ç–æ–≤—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è:

```env
N8N_WEBHOOK_BASE_URL=http://localhost:5678
N8N_WEBHOOK_SECRET=your-secret
N8N_GET_AUTHORS_WEBHOOK=/webhook/get-authors
N8N_ADD_AUTHOR_WEBHOOK=/webhook/add-author
# ... —ñ–Ω—à—ñ webhook –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏
```

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è N8NWebhookService

```typescript
import { N8NWebhookService } from './n8n-webhook.service';

constructor(private readonly n8nWebhook: N8NWebhookService) {}

// GET –∑–∞–ø–∏—Ç
const channels = await this.n8nWebhook.callWebhook<any[]>({
  endpoint: '/webhook/get-groups-telegram',
  method: 'GET',
  userLogin: 'user@example.com',
  telegramUsername: 'username', // –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ
});

// POST –∑–∞–ø–∏—Ç
const author = await this.n8nWebhook.callWebhook<any>({
  endpoint: '/webhook/add-author',
  method: 'POST',
  body: { instagramUrl: 'https://instagram.com/...' },
  userLogin: 'user@example.com',
});
```

## üìã –û–±–æ–≤'—è–∑–∫–æ–≤—ñ –ø—Ä–∞–≤–∏–ª–∞

1. **–ó–∞–≤–∂–¥–∏ —ñ–Ω—Ç–µ–≥—Ä—É–π—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—é** —á–µ—Ä–µ–∑ `JwtAuthGuard` –Ω–∞ –∑–∞—Ö–∏—â–µ–Ω–∏—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö
2. **–ó–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `UserContextService`** –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è `userLogin` –∑ —Ç–æ–∫–µ–Ω—É
3. **–ó–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `N8NWebhookService`** –¥–ª—è n8n webhook –≤–∏–∫–ª–∏–∫—ñ–≤
4. **–ó–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `MainServerClientService`** –¥–ª—è —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è –∑ –æ—Å–Ω–æ–≤–Ω–∏–º —Å–µ—Ä–≤–µ—Ä–æ–º
5. **–ó–∞–≤–∂–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞–π—Ç–µ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ** `{ status, data, message }`
6. **–ó–∞–≤–∂–¥–∏ –æ–±—Ä–æ–±–ª—è–π—Ç–µ –ø–æ–º–∏–ª–∫–∏** –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑ try/catch
7. **–ó–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ DTO** –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –∑–∞–ø–∏—Ç—ñ–≤
8. **–ó–∞–≤–∂–¥–∏ –¥–æ–∫—É–º–µ–Ω—Ç—É–π—Ç–µ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏** –∑ Swagger –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞–º–∏
9. **–ù—ñ–∫–æ–ª–∏ –Ω–µ –º–æ–¥–∏—Ñ—ñ–∫—É–π—Ç–µ –ª–æ–≥—ñ–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó** –≤ `src/auth/`
10. **–ù—ñ–∫–æ–ª–∏ –Ω–µ –æ–±—Ö–æ–¥—å—Ç–µ JWT –≤–∞–ª—ñ–¥–∞—Ü—ñ—é**

## üéØ –®–≤–∏–¥–∫–∏–π —á–µ–∫–ª–∏—Å—Ç

–ü–µ—Ä–µ–¥ –¥–æ–¥–∞–≤–∞–Ω–Ω—è–º –Ω–æ–≤–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó:

- [ ] **Auth guard –¥–æ–¥–∞–Ω–æ** (`@UseGuards(JwtAuthGuard)`)
- [ ] **Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –¥–æ–¥–∞–Ω–∞** (`@ApiBearerAuth()`, `@ApiOperation()`, `@ApiResponse()`)
- [ ] **DTO —Å—Ç–≤–æ—Ä–µ–Ω–æ** –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –∑–∞–ø–∏—Ç—É
- [ ] **UserContextService –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ** –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è `userLogin`
- [ ] **N8NWebhookService –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ** –¥–ª—è n8n –≤–∏–∫–ª–∏–∫—ñ–≤ (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
- [ ] **–§–æ—Ä–º–∞—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–∏–π** (`{ status, data, message }`)
- [ ] **–û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫** —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞
- [ ] **–ê–Ω–≥–ª—ñ–π—Å—å–∫—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è** –¥–ª—è –≤—Å—ñ—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
- [ ] **–ù–ï –∑–º—ñ–Ω–µ–Ω–æ auth —Å–∏—Å—Ç–µ–º—É** (`src/auth/`)
- [ ] **–ù–ï –∑–º—ñ–Ω–µ–Ω–æ –∫–ª—ñ—î–Ω—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞** (`src/services/main-server-client.service.ts`)

## üìö –î–µ—Ç–∞–ª—å–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

- **[AI_AGENT_GUIDE_EN.md](./AI_AGENT_GUIDE_EN.md)** - –ü–æ–≤–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è (English)
- **[AI_AGENT_QUICK_REFERENCE_EN.md](./AI_AGENT_QUICK_REFERENCE_EN.md)** - –®–≤–∏–¥–∫–∏–π –¥–æ–≤—ñ–¥–Ω–∏–∫ (English)
- **[AI_AGENT_CODE_EXAMPLES_EN.md](./AI_AGENT_CODE_EXAMPLES_EN.md)** - –ü—Ä–∏–∫–ª–∞–¥–∏ –∫–æ–¥—É (English)
- **[AI_AGENT_RULES_EN.md](./AI_AGENT_RULES_EN.md)** - –ü—Ä–∞–≤–∏–ª–∞ (English)
- **[AI_AGENT_GUIDE.md](./AI_AGENT_GUIDE.md)** - –ü–æ–≤–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è (Ukrainian)

---

**–ó–∞–≤–∂–¥–∏ –∑–≤–µ—Ä—Ç–∞–π—Ç–µ—Å—è –¥–æ –ø–æ–≤–Ω–æ—ó –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó –ø–µ—Ä–µ–¥ –ø–æ—á–∞—Ç–∫–æ–º —Ä–æ–±–æ—Ç–∏!**
